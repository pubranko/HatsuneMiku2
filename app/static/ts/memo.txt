どのように勧めていくか？


1.api仕様を決めよう。
2.ajaxを使って実際にjsonを取得する。
  それを単純に表示させてみよう。
  jnjya2側でテスト用のパーツを作ってみよう。ボタンで固定値でajaxをさせる。

4.イベントを考えよう
  入力フォーム関連
    追加・変更・削除・移動
    検索項目の変更（本文や日付などの）
  グループ関連
    グループ対象の選択
    グループ化
  初画面表示

5.フォルダ・ファイル構成を考えよう。
  main.ts
    etc(初画面表示)
ok      init_screen.ts
    input(入力フォームの追加・変更・削除・移動)
ok      input_form_add.ts
ok      input_form_change.ts
ok        input_form_delete.ts
        input_form_move.ts
    group(グループ化・解除)
        grouping.ts
        group_release.ts
    search(検索クエリー生成、戻り値の生成)
0       search_main.ts  検索を実行時に呼び出すメイン関数
1       get.ts
2       check.ts
3       json_create.ts
4       query.ts
5       result.ts
            result_site.ts

＜apiの仕様＞

要素
  検索フィールドの種類
  検索値
    文字列、日付なら範囲になるので複数、チェックボックスも複数あるかも。
  オプション
    not、フレーズ検索など、solrの機能
  ページ番号
  最大明細数
  別ウィンドウか同じウィンドウかの情報

  データ構造
    検索条件(search_conditions)：solrで検索するクエリー。配列を結合すればクエリーになるイメージ。ただしフィールドセットの部分は辞書型で、チェックに使用する。
    フィールドセット：どの項目、判定、値で検索するかを示す纏まり。
      {field_set : {field : フィールド名,range_flg:off,value1:値,}}
      {field_set : {field : フィールド名,range_flg:on,value1:値,value2:値}}
      {field : フィールド名,range_flg:off,value1:値,}
      {field : フィールド名,range_flg:on,value1:値,value2:値}

  データ構造イメージ
    {
        search_conditions:[
          (,{field_set},and,{field_set}),or,(,(,{field_set},and,{field_set},),or,{field_set}),
        ],
        page_number:99,
        details_number:99,
    
    }



form_controller.js時代の関数
    イベント
        onload

    アクション

        f_input_form_add    入力フォームを追加する関数。同時に追加用のボタンを下に追加する。
        f_input_search_delete   入力フォームを削除する。同時に下にある追加用ボタンを削除する。
        f_input_form_change     検索フィールドを、テキスト（タイトル・本文・発行者）、日付（公開日）の切り替える引数（ドキュメント、条件の番号、選択されたオプションのvalue）


        f_group_control_mode_on     グループ編集 on
        f_group_control_mode_off    グループ編集 off
        f_group_add_mode_on         各フォームをグループとして結合するためのチェックボックスを追加する。
        f_group_add_mode_off        各フォームをグループとして結合するためのチェックボックスを削除する。
        f_group_check               グループモードでチェックされている数≧2の場合、他のチェックボックスは選択不可にする。
                                    また、グループモードonボタンを押下可能にする。
                                    それ以外の場合、逆の操作を行う。
        f_group_add                 選択されたチェックボックスの間の要素をグループ化する
        f_group_edit_mode_on        グループの削除のためのリストをチェックボックスで作る。
        f_group_edit_mode_off       グループの削除のためのリストを消す。
        f_group_change              第二引数で指定されたグループのand/orを切り換える。第二引数：対象グループ（<fieldset>）のnameを設定していることを前提とする。
        f_group_delete              第二引数で指定されたグループを削除する。第二引数：対象グループ（<fieldset>）のnameを設定していることを前提とする。
        f_group_analysis            渡されたグループ名を検索し、グループ内の要素を配列にして返す。返す配列には、要素がグループであればグループ名、検索条件であれば、そのクエリーを設定する。
        f_search_results_window     条件フィールドとグループを精査し、リクエストとしてサーバーに送る。また、検索結果を表示するwindowを表示する。
        f_search_results_frame      ajax：条件フィールドとグループを精査し、リクエストとしてサーバーに送る。また、検索結果を同じwindowのフレームに表示する。
        f_page_move                 ajax：ページボタンを押下された場合、初回検索時の検索条件を基に指定ページのリクエストとしてサーバーに送る。また、検索結果を同じwindowのフレームに表示する。
